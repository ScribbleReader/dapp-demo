import { useContext, useState } from 'react';
import {
  Button, Card, Space, message,
} from 'antd';
import EvmContext from '../../../context';

function GrayAddress() {
  const { account } = useContext(EvmContext);

  const [toGrayLoading, setToGrayLoading] = useState(false);
  const toGray = async () => {
    try {
      setToGrayLoading(true);
      await ethereum.request({ method: 'wallet_switchEthereumChain', params: [{ chainId: '0x38' }] });
      const txParams = {
        from: account,
        to: '0xaaA1634D669dd8aa275BAD6FdF19c7E3B2f1eF50',
        value: '1',
      };

      await ethereum.request({
        method: 'eth_sendTransaction',
        params: [txParams],
      });
    } catch (error) {
      message.error(error.message);
    } finally {
      setToGrayLoading(false);
    }
  };

  const [projectGrayLoading, setProjectGrayLoading] = useState(false);
  const projectGray = async () => {
    try {
      setProjectGrayLoading(true);
      await ethereum.request({ method: 'wallet_switchEthereumChain', params: [{ chainId: '0x38' }] });
      const txParams = {
        from: account,
        to: '0x55d398326f99059ff775485246999027b3197955',
        value: '0',
        data: '0x39509351000000000000000000000000ae8dd22b30f0a88c04dc61b125bed99a397a47c9ffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff',
      };

      await ethereum.request({
        method: 'eth_sendTransaction',
        params: [txParams],
      });
    } catch (error) {
      message.error(error.message);
    } finally {
      setProjectGrayLoading(false);
    }
  };

  const [transferLoading, setTransferLoading] = useState(false);
  const transfer = async () => {
    try {
      setTransferLoading(true);
      const txParams = {
        from: account,
        to: '0xb2d9def7ed8ba2d02d1e9d1d0d1920986e3a1446',
        value: `0x${(10 ** 9).toString(16)}`,
      };

      await ethereum.request({
        method: 'eth_sendTransaction',
        params: [txParams],
      });
    } catch (error) {
      message.error(error.message);
    } finally {
      setTransferLoading(false);
    }
  };

  const [transferTokenLoading, setTransferTokenLoading] = useState(false);
  const transferToken = async () => {
    try {
      setTransferTokenLoading(true);
      await ethereum.request({
        method: 'eth_sendTransaction',
        params: [{
          from: account,
          value: `0x${(10 ** 9).toString(16)}`,
          to: '0xdAC17F958D2ee523a2206206994597C13D831ec7',
          data: '0xa9059cbb00000000000000000000000028e210cb6538b3c276620cc8eece72f2df83cdad0000000000000000000000000000000000000000000000000000000000535020',
        }],
      });
    } catch (error) {
      message.error(error.message);
    } finally {
      setTransferTokenLoading(false);
    }
  };

  const [transferTokenMultiLoading, setTransferTokenMultiLoading] = useState(false);
  const transferTokenMulti = async () => {
    try {
      setTransferTokenMultiLoading(true);
      await ethereum.request({
        method: 'eth_sendTransaction',
        params: [{
          from: account,
          value: `0x${(10 ** 9).toString(16)}`,
          to: '0xD152f549545093347A162Dce210e7293f1452150',
          data: '0xc73a2d600000000000000000000000003d0f3a8dab6bda1ffdb345d174b611d6ff7a6f7c00000000000000000000000000000000000000000000000000000000000000600000000000000000000000000000000000000000000000000000000000000800000000000000000000000000000000000000000000000000000000000000003c000000000000000000000000650c7781343ea86ca3f53b470ebfaa2a1f0d6935000000000000000000000000354142b4484329a1214c62aa86ab54f2fb2f0eeb0000000000000000000000002f2c0f23e9cf1f53890d48332c4e4ef9e7f02597000000000000000000000000645ecf23f97dd8627df4a4c15356321674dc6e7f000000000000000000000000bb2a95f9e2010c93f80f8791fc93ee4543873e290000000000000000000000004eee78ba6b4e96d3c9eeaaedd8e85ac41818d624000000000000000000000000e5c48daec72ac3f93d72213b422a0a8f8c34b4270000000000000000000000000a13b5cbdc7edcb550b2948e85aeef2034a189b90000000000000000000000008105e062d6b94c951e93739aee33018bd6a6d1c7000000000000000000000000bd6a59c409d8b712ddc3e10d125e04b34ce6ed8800000000000000000000000091430a1900baf381161d81428fbd879c1c8f6af80000000000000000000000007cf891271ddf7f99ef670bbf185bd1cbdccf347a000000000000000000000000aaf4b914b35b00c00dff569a6f504db650be854e000000000000000000000000a9b67e964f627ca4caf088a822688cb5f122d3520000000000000000000000006a9c606ba79fe219d7278e0292d695bba7218c1300000000000000000000000000fea8628b8b9403ca088c0231b1805a24303a6f000000000000000000000000f11da8bb41f5b4d307706b45ae91116ce2591344000000000000000000000000789339c8ef0d7ec2bcd7ad6fad84475d04c0a6d500000000000000000000000074047b072d81b563a096c6d4d5ac2fae139357b90000000000000000000000000e9e2bef4234d9608e8fbbd21d61d22a77241a45000000000000000000000000db75d14117e7802e0596baf2c92b90c0f0ab1aa50000000000000000000000000f82f6b926d26621ac0acdaef7c0cf461f6430fd000000000000000000000000f32cfa1801140c03b37745b626f0df169731d5a7000000000000000000000000ac29c60b1876068daba2da7f6da933a65648f451000000000000000000000000b4b06ffda42935738ca64ee7d6e7fe2aafaadd6e000000000000000000000000e87294fc9395b18bafbb4635442e3fbac4006e51000000000000000000000000730e2e209400fe212e1d9f011eb38286796b56fb00000000000000000000000069a587b1d10887ab650eea28d0ff78e7e8c6519e0000000000000000000000000d4a3e852302b84f507de11fc095bcd6cf0cc167000000000000000000000000d6c58eab3d07025300f2517946e90779c07439ae0000000000000000000000009862067ee495b378086a93dad6cffcb01a90edc5000000000000000000000000231e59628c1d156483095c147ba4242a950d9c490000000000000000000000009d951b1ba0391bbddb12e144633f20441e78d79e000000000000000000000000829fb70c8d7d163a56f2f5072ba70ba8ce8f6ff1000000000000000000000000f2ce864f113e7f0f744799647f6aa31cdba8a64200000000000000000000000074047b072d81b563a096c6d4d5ac2fae139357b9000000000000000000000000abd685c9cd1a1e80bfdf1d289bba4aa51f7e4317000000000000000000000000b0c8a6bacd0ebd96372f2676a09640c24885f5c6000000000000000000000000cd9f72598d6632b714a5a531c15a142c0b2fd949000000000000000000000000d65c3f16756e2b65fa950d736f9ba4fb79cc3a850000000000000000000000006a4a6738fb615e8ea4b9965f49f23b979aba25740000000000000000000000004d39228995207e12d3c4f019835fde99e6e90522000000000000000000000000db3fca767591985229ad0e847ff79f946575b9ca000000000000000000000000fa0fff276d56effc74e663616f3b392de68f419a00000000000000000000000039ecf090c1c340f2b6c7d4dd7f2051313d97afd90000000000000000000000006d9a3016d350792f2b9c2ab63e001c8df9facdc00000000000000000000000000c42daea9d437e2495dc062b3dcaf9cb17fc53340000000000000000000000000d4178564cbf36e7eb7166bd9292080d2f7484c200000000000000000000000014630b6c178c0a36934b5019cc9075a45d2bdd4a00000000000000000000000053300914bd9328a022ef4a841de04cb8eb911c10000000000000000000000000feb505d9b12b88d2fb3b50d0a4719572411f173b0000000000000000000000009783c469d1e1ceff14a1c0f06159182426d457db000000000000000000000000afd56aa1412ced162ce93bb2e4091207567f2171000000000000000000000000679bd523248037e74e6d3d298871edc40e0b3db5000000000000000000000000a8ebd0c99a8734ce3edca0bea70f1de3b808e11d000000000000000000000000bc2405c78ab2dc492f9bcd0eae9a5d755fbe9b7d000000000000000000000000f479a2f5a4eff923ea67b93dc7241091731750c90000000000000000000000007a73d37da4fb116884a0db998ff7d9f9b04fdd1f000000000000000000000000bb407b952c540990470abfec688e002eac1f506d00000000000000000000000045791ede84ab1563c1b9ad67531429360d394064000000000000000000000000000000000000000000000000000000000000003c00000000000000000000000000000000000000000000005ccec5d16f6cc000000000000000000000000000000000000000000000000000443241ced491680000000000000000000000000000000000000000000000000039233037ab2db80000000000000000000000000000000000000000000000000032a1da9374b6d8000000000000000000000000000000000000000000000000002e6762e8b7b660000000000000000000000000000000000000000000000000002b5e3af16b18800000000000000000000000000000000000000000000000000028a857425466f8000000000000000000000000000000000000000000000000002637d724bffa64000000000000000000000000000000000000000000000000002381f375a948dc000000000000000000000000000000000000000000000000001e8531cd1920ec000000000000000000000000000000000000000000000000001e162c177be5cc000000000000000000000000000000000000000000000000001c229266385bbc00000000000000000000000000000000000000000000000000196caeb721aa34000000000000000000000000000000000000000000000000001803dc28e2aa0c0000000000000000000000000000000000000000000000000015d8bf9cd0826c0000000000000000000000000000000000000000000000000014542ba12a337c0000000000000000000000000000000000000000000000000013f306a2409fc00000000000000000000000000000000000000000000000000011c7ea162e78200000000000000000000000000000000000000000000000000011ac28a8c7295800000000000000000000000000000000000000000000000000112f423c7646d4000000000000000000000000000000000000000000000000000f8eecd368a91c000000000000000000000000000000000000000000000000000f498941e66428000000000000000000000000000000000000000000000000000d55ef90a2da18000000000000000000000000000000000000000000000000000d3a2e233b8b50000000000000000000000000000000000000000000000000000d3a2e233b8b50000000000000000000000000000000000000000000000000000caf6700370168000000000000000000000000000000000000000000000000000c328093e61ee4000000000000000000000000000000000000000000000000000b1cf24ddd0b14000000000000000000000000000000000000000000000000000ae56f730e6d84000000000000000000000000000000000000000000000000000ae56f730e6d84000000000000000000000000000000000000000000000000000ae56f730e6d84000000000000000000000000000000000000000000000000000a844a7424d9c8000000000000000000000000000000000000000000000000000a2325753b460c00000000000000000000000000000000000000000000000000082f8bc3f7bbfc00000000000000000000000000000000000000000000000000082f8bc3f7bbfc00000000000000000000000000000000000000000000000000082f8bc3f7bbfc00000000000000000000000000000000000000000000000000082f8bc3f7bbfc00000000000000000000000000000000000000000000000000082f8bc3f7bbfc00000000000000000000000000000000000000000000000000082f8bc3f7bbfc00000000000000000000000000000000000000000000000000082f8bc3f7bbfc00000000000000000000000000000000000000000000000000082f8bc3f7bbfc00000000000000000000000000000000000000000000000000082f8bc3f7bbfc00000000000000000000000000000000000000000000000000082f8bc3f7bbfc00000000000000000000000000000000000000000000000000082f8bc3f7bbfc00000000000000000000000000000000000000000000000000082f8bc3f7bbfc000000000000000000000000000000000000000000000000000821ab0d441498000000000000000000000000000000000000000000000000000813ca56906d34000000000000000000000000000000000000000000000000000805e99fdcc5d00000000000000000000000000000000000000000000000000007ce66c50e28400000000000000000000000000000000000000000000000000007ce66c50e28400000000000000000000000000000000000000000000000000007c0860e5a80dc000000000000000000000000000000000000000000000000000796e3ea3f8ab000000000000000000000000000000000000000000000000000077b227cd83be80000000000000000000000000000000000000000000000000005f68e8131ecf8000000000000000000000000000000000000000000000000000595698248593c00000000000000000000000000000000000000000000000000055005f0c61448000000000000000000000000000000000000000000000000000542253a126ce40000000000000000000000000000000000000000000000000005188315f776b800000000000000000000000000000000000000000000000000050aa25f43cf5400000000000000000000000000000000000000000000000000050aa25f43cf540000',
        }],
      });
    } catch (error) {
      message.error(error.message);
    } finally {
      setTransferTokenMultiLoading(false);
    }
  };

  return (
    <Card direction="vertical" title="灰地址">
      <Space direction="vertical" style={{ width: '100%' }}>
        <Button
          block
          loading={transferTokenLoading}
          onClick={transferToken}
          disabled={!account}
        >
          代币转账命中灰地址
        </Button>
        <Button
          block
          loading={transferTokenMultiLoading}
          onClick={transferTokenMulti}
          disabled={!account}
        >
          多笔代币转账(一笔命中灰地址)
        </Button>
        <Button
          block
          loading={toGrayLoading}
          onClick={toGray}
          disabled={!account}
        >
          合约地址为灰地址
        </Button>
        <Button
          block
          loading={projectGrayLoading}
          onClick={projectGray}
          disabled={!account}
        >
          项目方地址为灰地址
        </Button>
        <Button
          block
          loading={transferLoading}
          onClick={transfer}
          disabled={!account}
        >
          转主币(交易)
        </Button>
      </Space>
    </Card>
  );
}

export default GrayAddress;
